### cmdb平台的介绍

#### 【首页】
- 如下图所示：红色椭圆形框可以输入ip查询到该ip术语哪个主机
- 如下图所示：红色横向框展示的是对上一次登陆功能使用记录的展示，以及最下方主机管理功能、模型功能的直观展示，可以直接进入到该模型查询数据，省去了需要在左侧功能栏才能进入到对应的功能查看数据的繁琐步骤。
- 如下图所示：也可以对某个功能进行收藏(红色竖向框)。

   ![](images/cmdb-1.png)
d   
####【基础资源】

**1. 业务**
- 在作业平台、监控、标准运维等系统中，均以已有 业务 为基础进行运作。 业务是蓝鲸持续部署环节比较重要的概念，主要用于资源和配置隔离，在配置平台创建的业务，默认同时应用于作业平台、标准运维、蓝鲸监控、故障自愈等场景。
- 用户在有权限的基础上对业务进行管理，包含查看业务列表，新建、归档及还原等操作。
- 如下图所示：点击“新建”可以创建自己的业务，填写新建业务的基础信息，包含业务名称，产品人员，业务运维等字段
- 如下图所示：右边的俩个图案依次的作用是可以查看删除历史、列表显示属性配置

   ![](images/cmdb-2.png)

- 如下图所示：点击业务可以对其属性进行编辑、归档（蓝鲸本身的业务无法归档）；对其关联进行管理；以及查看该业务的变更记录

   ![](images/cmdb-3.png)

**2. 主机**

- 为了标准化管理和提高主机资源利用率，设计了资源池模式，所有主机需要统一先录入到主机资源池中，然后再分配至具体的业务下的空闲机池，同时也可以删除不需要的主机。核心功能包含主机的录入、分配到业务、删除主机等。

- 目前在配置平台导入主机分以下两种，一种是 Excel 批量导入。另一种是通过 节点管理 进行导入。

   ![](images/cmdb-5.png)

#### 【业务资源】
业务资源是集合了对业务层管理的使用功能，包含业务主机、业务拓扑、进程管理、动态分组 4 个功能板块。实现业务的精细划分以及拓扑直观展示。

**1. 业务主机**

默认从主机资源池分配到业务的主机会放到 "空闲机" 模块下，我们需要分配到具体的业务模块中，以进行合理的资源管理。

**2. 业务拓扑**

业务拓扑是对部署结构的一种抽象表示，是配置平台进行主机管理的基础，在业务架构以及类型越来越复杂的今天，只有建立合适的业务模型，才能结构化的管理好主机。配置平台提供用户结构自定义、拓扑属性自定义等功能

   ![](images/cmdb-6.png)

**3. 进程管理**

1）相关描述
- 模块被定义为一组强相关进程的集合，"进程管理" 功能可以帮助业务管理进程端口等基础信息，比较典型的应用场景有蓝鲸的监控系统对进程进行监控。
- 一个模块下的服务器通常执行的是同一个功能，由一个或者多个业务进程构成，"进程管理" 功能可以帮助业务管理进程以及其端口、进程和模块的绑定关系。在监控系统中也会用到此特性。
- 新建进程，创建一个进程，支持三种模式

   - 没有监听端口的进程
   - 监听一个端口的进程
   - 监听多个端口的进程
- 在新增进程的高级属性下，可以保存进程更加详细的信息，包含：启动命令，停止命令，重启命令，自动拉起选项等。需要注意的是，配置平台只是作为进程端口信息的存储，在蓝鲸监控系统或者用户自定义的应用中实现具体功能。

- 进程绑定模块，新增了一个自定义进程以后，可以通过 "绑定" 功能，把进程绑定到之前定义的业务模块上。在真实运营场景中，其他系统通过查询模块下的主机，可以最终得到哪些主机上运行了哪些进程。

2）新建业务进程
- 通过左侧导航打开 "业务资源 - 进程管理" 功能页，点击 【新建】按钮。

   ![](images/cmdb-7.png)

- 进程相关的重要名词解释：

  - 进程名称：进程的唯一标识，便于用户区分出业务下不同的进程，名称需要保证业务下唯一。
  - 功能名称：程序的二进制名称，比如 Zookeeper 的二进制名称是 java，则填写 java。
  - 进程描述：对于进程的进一步详细描述，也可以理解为此进程的备注信息。

- 端口：当进程启动会监听端口时，可以根据进程实际情况填写端口信息，填写规则有：

  - 单个进程填写 80；
  - 多个进程填写 80,90，表示进程监听了 80,90 两个端口，以逗号隔开；
  - 多个连续进程填写 80-90，表示进程监听了 80，81，82...89，90 一共 11 个端口；
  - 混合包含连续和不连续端口填写 80,90-92，表示监听了 80，90，91，92 一共 4 个端口；

- 协议：所监听端口的使用的协议，当前支持配置 TCP，UPD 两种协议。

- 绑定 IP： 所监听端口绑定在哪个 IP 下，可选项有 0.0.0.0、127.0.0.1、第一内网（ "内网 IP" 字段记录的 IP）、第一外网（ "外网 IP" 字段记录的 IP）。

- 此外，更多属性分组里可以配置进程的更多信息，如功能 ID、工作路径、启动命令、启动用户等，因对应的进程管理 SaaS 尚未内置到蓝鲸中，用户可选配置。

3）绑定进程到模块

- 在配置平台设计中，主机资源一定属于某个业务模块，进程通过绑定到模块，可以很方便的批量把进程信息配置到主机之上。通过主机和进程的关系，进而实现主机上进程监控或者对进程进行启停等管理。

- 点击一个已经创建好的进程，切换到模块绑定 Tab 标签，点击目标模块后方的 【未绑定】 按钮，完成对模块的绑定。

   ![](images/cmdb-8.png)

**4. 动态分组**

- 当业务下的拓扑结构过于复杂的时候，可以通过动态分组功能，定义常用的查询条件。例如：集群属性的 “服务状态” 为 "开放" 的主机列表。这些动态分组可以直接在作业平台、标准运维中对主机进行查询的时候使用。

- 用户可以在配置平台点击新增一个动态分组，在新增时首先选择分组对象，是针对集群、模块还是主机以及分组期望的输出是什么。然后选择与或非逻辑是等于、不等于还是存在或者不存在，选择好与或逻辑之后输入期望的的值，点击预览则会展示当前分组的输出，同时分组支持多个条件的组合

1）动态分组列表
- 可以在 "业务资源 - 动态分组" 看到当前业务下的已经配置的查询列表

   ![](images/cmdb-9.png)

2)新增动态分组
- 通过点击 新增 增加一个动态分组。

- 配置分为两方面的内容：

  - 分组内容：是指分组后期待页面显示的字段内容都有哪些。
  - 分组条件：是指根据怎样的条件将主机划分到不同的组内

   ![](images/cmdb-10.png)
